(this["webpackJsonpprototype-sashimi"]=this["webpackJsonpprototype-sashimi"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var c=n(40),r=n(0),s=function(){return Object(r.jsx)("header",{children:Object(r.jsx)("div",{className:"hero is-success",children:Object(r.jsxs)("div",{className:"hero-body",children:[Object(r.jsx)("p",{className:"title",children:"furu-vis"}),Object(r.jsx)("p",{className:"subtitle",children:"furu-vis"})]})})})},a=n(2),i=n(13),l=n(3),j=n.n(l),o=n(41),u=n(4),b=n(1),d=function(e){var t=e.currentArea,n=Object(b.useState)([]),c=Object(a.a)(n,2),s=c[0],l=c[1],d=Object(b.useState)(null),x=Object(a.a)(d,2),h=x[0],O=x[1],p=Object(b.useState)(null),f=Object(a.a)(p,2),g=f[0],m=f[1],v=Object(b.useState)([]),y=Object(a.a)(v,2),k=y[0],N=y[1],S=u.c().center([139.355972,35.39083350000001]).translate([315,190]).scale(1890);return Object(b.useEffect)((function(){Object(i.a)(j.a.mark((function e(){var t,n,c,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/japan_simplify.topojson");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,o.a(n,n.objects["N03-21_210101-N03-21_210101"]);case 8:c=e.sent,r=u.d().projection(S),s=[],c.features.map((function(e){s.push({path:r(e),areaCode:e.properties.N03_007})})),l(s),m(c);case 14:case"end":return e.stop()}}),e)})))()}),[]),Object(b.useEffect)((function(){if(g){var e=JSON.parse(JSON.stringify(g)),n=String(t);e.features.length=0,n=n.slice(0,-1),g.features.map((function(t){t.properties.N03_007==n&&e.features.push(t)}));var c=u.b(e),r=S(c);N(r),O(t)}}),[t]),s.length?Object(r.jsx)("div",{className:"column is-5",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsxs)("svg",{viewBox:"-50 0 770 325",width:"500",height:"550",children:[Object(r.jsx)("g",{children:s.map((function(e,t){return Object(r.jsx)("path",{d:e.path,stroke:"black",strokeWidth:"0.8",strokeOpacity:"0.5",style:{fill:h==e.areaCode?"red":"white"}},t)}))}),k.length>0?Object(r.jsx)("g",{children:Object(r.jsx)("circle",{cx:k[0],cy:k[1],r:"15",strokeWidth:"4",fill:"rgba(255,0,0,0)",stroke:"red"})}):""]})})}):Object(r.jsx)("div",{className:"column is-5",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsx)("p",{children:"loading"})})})},x=function(e){var t=e.scale,n=e.graphHeight,c=e.label,s="#888",i=t.range(),l=Object(a.a)(i,2),j=l[0],o=l[1],u=window.innerWidth;return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:0,y1:j,x2:0,y2:o+2,stroke:s,strokeWidth:"2"}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(-80, ".concat(n/2,") rotate(-90)"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:u>768?"15":"12",children:c})}),t.ticks().map((function(e,n){return Object(r.jsxs)("g",{transform:"translate(0, ".concat(t(e),")"),children:[Object(r.jsx)("line",{x1:"0",y1:"0",x2:"5",y2:"0",stroke:s}),Object(r.jsx)("text",{x:"-8",y:"0",textAnchor:"end",dominantBaseline:"central",fill:"black",fontSize:u>768?"12":"10",children:e})]},n)}))]})]})},h=function(e){var t=e.scale,n=e.graphWidth,c=e.graphHeight,s=e.label,i="#888",l=c,j=window.innerWidth,o=t.range(),u=Object(a.a)(o,2),b=u[0],d=u[1];return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:b,y1:l,x2:d+5,y2:l,stroke:i}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(".concat(n/2,", ").concat(l+40,")"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:"15",children:s})}),t.ticks(5).map((function(e,n){return Object(r.jsxs)("g",{transform:"translate(".concat(t(e),", 0)"),children:[Object(r.jsx)("line",{x1:"0",y1:c,x2:"0",y2:c-10,stroke:i}),Object(r.jsx)("text",{x:"0",y:l+15,textAnchor:"middle",dominantBaseline:"central",fontSize:j>768?"12":"10",children:e})]},n)}))]})]})},O=function(e){var t=e.effect,n=Object(b.useState)([]),c=Object(a.a)(n,2),s=c[0],l=c[1],o=Object(b.useState)([]),d=Object(a.a)(o,2),O=d[0],p=d[1],f=Object(b.useState)("price"),g=Object(a.a)(f,2),m=g[0],v=g[1],y=Object(b.useState)(null),k=Object(a.a)(y,2),N=k[0],S=k[1],w=Object(b.useState)([]),W=Object(a.a)(w,2),_=W[0],A=W[1],B=Object(b.useState)(null),H=Object(a.a)(B,2);H[0],H[1];if(Object(b.useEffect)((function(){Object(i.a)(j.a.mark((function e(){var t,n,c,r,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/population_test.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,l(n),e.next=9,fetch("./data/price_test.json");case 9:return c=e.sent,e.next=12,c.json();case 12:return r=e.sent,p(r),e.next=16,fetch("./data/2019_test.json");case 16:return s=e.sent,e.next=19,s.json();case 19:a=e.sent,A(a);case 21:case"end":return e.stop()}}),e)})))()}),[]),0===s.length)return Object(r.jsx)("div",{className:"column is-5",children:"Loading..."});var C=50,z=200,J=500,E=500,q=50+z+J,F=C+50+E,L=u.e().domain(u.a(O,(function(e){return e.year}))).range([0,J]).nice(),T=u.e().domain(u.a(_,(function(e){return e.rank}))).range([0,J]).nice(),V=function(e){t(e.currentTarget.dataset.id)},D=u.e().domain([0,u.a(s,(function(e){return e.population}))[1]]).range([E,0]),G=u.e().domain([0,u.a(O,(function(e){return e.price}))[1]]).range([E,0]),I=u.e().domain([0,u.a(_,(function(e){return e.price}))[1]]).range([E,0]);return Object(r.jsx)("div",{className:"column is-7",children:Object(r.jsxs)("div",{className:"box",children:[Object(r.jsxs)("svg",{viewBox:"".concat(-z," ").concat(-C," ").concat(q," ").concat(F),width:q,height:F,children:[null===N&&m&&Object(r.jsx)(h,{scale:L,graphWidth:J,graphHeight:E,label:"\u5e74"}),null===N&&m&&Object(r.jsx)(x,{scale:"price"===m?G:D,graphHeight:E,label:"price"===m?"\u53d7\u3051\u5165\u308c\u984d":"\u4eba\u53e3"}),null===N&&"price"===m&&Object(r.jsx)("g",{children:O.map((function(e,t){var n=t>0?O[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:L(n.year),y1:G(n.price),x2:L(e.year),y2:G(e.price),stroke:"black"},e.id)}))}),null===N&&"population"===m&&Object(r.jsx)("g",{children:s.map((function(e,t){var n=t>0?s[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:L(n.year),y1:D(n.population),x2:L(e.year),y2:D(e.population),stroke:"black"},e.id)}))}),2019===N&&_.length>0&&Object(r.jsx)(x,{scale:I,graphHeight:E,label:"\u53d7\u3051\u5165\u308c\u91d1\u984d"}),2019===N&&_.length>0&&Object(r.jsx)(h,{scale:T,graphWidth:J,graphHeight:E,label:"\u5e02\u533a\u753a\u6751\uff08\u9806\u4f4d\uff09"}),2019===N&&_.length>0&&Object(r.jsx)("g",{children:_.map((function(e,t){var n=t>0?_[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:T(n.rank),y1:I(n.price),x2:T(e.rank),y2:I(e.price),stroke:"black"},e.id)}))}),")"]}),Object(r.jsxs)("div",{children:[2019===N&&_.length>0&&Object(r.jsx)("ul",{children:_.map((function(e,t){return Object(r.jsx)("li",{"data-id":e.id,onClick:V,children:e.name},t)}))}),Object(r.jsx)("span",{children:"\u7279\u5fb4\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){S(null),v("population")},children:"\u4eba\u53e3"}),")"]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"\u5e74\u5ea6\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){v(null),S(2019)},children:"2019"})]})]})})},p=function(){var e=Object(b.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)("div",{className:"columns",children:[Object(r.jsx)(d,{currentArea:n}),Object(r.jsx)(O,{effect:c})]})},f=function(){return Object(r.jsx)("footer",{className:"footer",children:Object(r.jsx)("div",{className:"content has-text-centered",children:Object(r.jsx)("p",{children:"Furu-Vis"})})})},g=(n(129),function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(s,{}),Object(r.jsx)(p,{}),Object(r.jsx)(f,{})]})});Object(c.render)(Object(r.jsx)(g,{}),document.querySelector("#content"))}},[[130,1,2]]]);
//# sourceMappingURL=main.ee1949ad.chunk.js.map