(this["webpackJsonpprototype-sashimi"]=this["webpackJsonpprototype-sashimi"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var c=n(67),r=n(0),a=function(){return Object(r.jsx)("header",{children:Object(r.jsx)("div",{className:"hero is-success",children:Object(r.jsxs)("div",{className:"hero-body",children:[Object(r.jsx)("p",{className:"title",children:"furu-vis"}),Object(r.jsx)("p",{className:"subtitle",children:"furu-vis"})]})})})},s=n(2),i=n(14),l=n(4),j=n.n(l),o=n(69),u=n(3),d=n(1),b=function(e){var t=e.currentArea,n=Object(d.useState)([]),c=Object(s.a)(n,2),a=c[0],l=c[1],b=Object(d.useState)(null),h=Object(s.a)(b,2),x=h[0],O=h[1],p=Object(d.useState)(null),f=Object(s.a)(p,2),g=f[0],m=f[1],v=Object(d.useState)([]),y=Object(s.a)(v,2),k=y[0],N=y[1],S=u.c().center([139.355972,35.39083350000001]).translate([315,190]).scale(1890);return Object(d.useEffect)((function(){Object(i.a)(j.a.mark((function e(){var t,n,c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/japan_simplify.topojson");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,o.a(n,n.objects["N03-21_210101-N03-21_210101"]);case 8:c=e.sent,r=u.d().projection(S),a=[],c.features.map((function(e){a.push({path:r(e),areaCode:e.properties.N03_007})})),l(a),m(c);case 14:case"end":return e.stop()}}),e)})))()}),[]),Object(d.useEffect)((function(){if(g){var e=JSON.parse(JSON.stringify(g)),n=String(t);e.features.length=0,n=n.slice(0,-1),g.features.map((function(t){t.properties.N03_007==n&&e.features.push(t)}));var c=u.b(e),r=S(c);N(r),O(t)}}),[t]),a.length?Object(r.jsx)("div",{className:"column is-5",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsxs)("svg",{viewBox:"-50 0 770 325",width:"500",height:"550",children:[Object(r.jsx)("g",{children:a.map((function(e,t){return Object(r.jsx)("path",{d:e.path,stroke:"black",strokeWidth:"0.8",strokeOpacity:"0.5",style:{fill:x==e.areaCode?"red":"white"}},t)}))}),k.length>0?Object(r.jsx)("g",{children:Object(r.jsx)("circle",{cx:k[0],cy:k[1],r:"15",strokeWidth:"4",fill:"rgba(255,0,0,0)",stroke:"red"})}):""]})})}):Object(r.jsx)("div",{className:"column is-5",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsx)("p",{children:"loading"})})})},h=function(e){var t=e.scale,n=e.graphHeight,c=e.label,a="#888",i=t.range(),l=Object(s.a)(i,2),j=l[0],o=l[1],u=window.innerWidth;return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:0,y1:j,x2:0,y2:o+2,stroke:a,strokeWidth:"2"}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(-80, ".concat(n/2,") rotate(-90)"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:u>768?"15":"12",children:c})}),t.ticks().map((function(e,n){return Object(r.jsxs)("g",{transform:"translate(0, ".concat(t(e),")"),children:[Object(r.jsx)("line",{x1:"0",y1:"0",x2:"5",y2:"0",stroke:a}),Object(r.jsx)("text",{x:"-8",y:"0",textAnchor:"end",dominantBaseline:"central",fill:"black",fontSize:u>768?"12":"10",children:e})]},n)}))]})]})},x=function(e){var t=e.scale,n=e.graphWidth,c=e.graphHeight,a=e.label,i=c,l=window.innerWidth,j=t.range(),o=Object(s.a)(j,2),u=o[0],d=o[1];return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:u,y1:i,x2:d+25,y2:i,stroke:"#888"}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(".concat(n/2,", ").concat(i+40,")"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:"15",children:a})}),t.ticks(5).map((function(e,n){return Object(r.jsx)("g",{transform:"translate(".concat(t(e)+20,", 0)"),children:Object(r.jsx)("text",{x:"0",y:i+15,textAnchor:"middle",dominantBaseline:"central",fontSize:l>768?"12":"10",children:e})},n)}))]})]})},O=function(e){var t=e.effect,n=Object(d.useState)([]),c=Object(s.a)(n,2),a=c[0],l=c[1],o=Object(d.useState)([]),b=Object(s.a)(o,2),O=b[0],p=b[1],f=Object(d.useState)("price"),g=Object(s.a)(f,2),m=g[0],v=g[1],y=Object(d.useState)(null),k=Object(s.a)(y,2),N=k[0],S=k[1],w=Object(d.useState)([]),H=Object(s.a)(w,2),W=H[0],_=H[1],A=Object(d.useState)(null),B=Object(s.a)(A,2),C=(B[0],B[1],u.f(u.g));if(Object(d.useEffect)((function(){Object(i.a)(j.a.mark((function e(){var t,n,c,r,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/population_test.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,l(n),e.next=9,fetch("./data/price_test.json");case 9:return c=e.sent,e.next=12,c.json();case 12:return r=e.sent,p(r),e.next=16,fetch("./data/2019_test.json");case 16:return a=e.sent,e.next=19,a.json();case 19:s=e.sent,_(s);case 21:case"end":return e.stop()}}),e)})))()}),[]),0===a.length)return Object(r.jsx)("div",{className:"column is-5",children:"Loading..."});var V=50,z=200,J=500,E=500,M=50+z+J,q=V+50+E,F=u.e().domain(u.a(O,(function(e){return e.year}))).range([0,J]).nice(),L=u.e().domain(u.a(W,(function(e){return e.rank}))).range([0,J]).nice(),T=function(e){t(e.currentTarget.dataset.id)},D=u.e().domain([0,u.a(a,(function(e){return e.population}))[1]]).range([E,0]),G=u.e().domain([0,u.a(O,(function(e){return e.price}))[1]]).range([E,0]),I=u.e().domain([0,u.a(W,(function(e){return e.price}))[1]]).range([E,0]);return Object(r.jsx)("div",{className:"column is-7",children:Object(r.jsxs)("div",{className:"box",children:[Object(r.jsxs)("svg",{viewBox:"".concat(-z," ").concat(-V," ").concat(M," ").concat(q),width:M,height:q,children:[null===N&&m&&Object(r.jsx)(x,{scale:F,graphWidth:J,graphHeight:E,label:"\u5e74"}),null===N&&m&&Object(r.jsx)(h,{scale:"price"===m?G:D,graphHeight:E,label:"price"===m?"\u53d7\u3051\u5165\u308c\u984d":"\u4eba\u53e3"}),null===N&&"price"===m&&Object(r.jsx)("g",{children:O.map((function(e,t){var n=F(e.year)+20,c=G(e.price);return console.log(F(e.year)),Object(r.jsx)("path",{d:"M ".concat(n-10," ").concat(c,"\n                       H ").concat(n+10," V ").concat(E," H ").concat(n-10," \n                      V ").concat(c,"\n                      "),stroke:C("price"),fill:C("price")},e.id)}))}),null===N&&"population"===m&&Object(r.jsx)("g",{children:a.map((function(e,t){var n=t>0?a[t-1]:null;if(t>0)return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:F(n.year),y1:D(n.population),x2:F(e.year),y2:D(e.population),stroke:C("population")},e.id),Object(r.jsx)("circle",{cx:F(e.year),cy:D(e.population),r:"2",fill:C("population")},e.id)]})}))}),2019===N&&W.length>0&&Object(r.jsx)(h,{scale:I,graphHeight:E,label:"\u53d7\u3051\u5165\u308c\u91d1\u984d"}),2019===N&&W.length>0&&Object(r.jsx)(x,{scale:L,graphWidth:J,graphHeight:E,label:"\u5e02\u533a\u753a\u6751\uff08\u9806\u4f4d\uff09"}),2019===N&&W.length>0&&Object(r.jsx)("g",{children:W.map((function(e,t){var n=L(e.rank),c=I(e.price);return Object(r.jsx)("path",{d:"M ".concat(n-10," ").concat(c,"\n                   H ").concat(n+10," V ").concat(E," H ").concat(n-10," \n                  V ").concat(c,"\n                  "),stroke:C("price"),fill:C("price")},e.id)}))}),")"]}),Object(r.jsxs)("div",{children:[2019===N&&W.length>0&&Object(r.jsx)("ul",{children:W.map((function(e,t){return Object(r.jsx)("li",{"data-id":e.id,onClick:T,children:e.name},t)}))}),Object(r.jsx)("span",{children:"\u7279\u5fb4\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){S(null),v("population")},children:"\u4eba\u53e3"}),")"]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"\u5e74\u5ea6\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){v(null),S(2019)},children:"2019"})]})]})})},p=function(){var e=Object(d.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)("div",{className:"columns",children:[Object(r.jsx)(b,{currentArea:n}),Object(r.jsx)(O,{effect:c})]})},f=function(){return Object(r.jsx)("footer",{className:"footer",children:Object(r.jsx)("div",{className:"content has-text-centered",children:Object(r.jsx)("p",{children:"Furu-Vis"})})})},g=(n(169),function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(a,{}),Object(r.jsx)(p,{}),Object(r.jsx)(f,{})]})});Object(c.render)(Object(r.jsx)(g,{}),document.querySelector("#content"))}},[[170,1,2]]]);
//# sourceMappingURL=main.2f55cfcf.chunk.js.map