(this["webpackJsonpprototype-sashimi"]=this["webpackJsonpprototype-sashimi"]||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);var c=n(40),r=n(0),a=function(){return Object(r.jsx)("div",{})},i=n(3),s=n(13),j=n(2),l=n.n(j),o=n(41),u=n(4),b=n(1),d=function(e){var t=e.currentArea,n=Object(b.useState)([]),c=Object(i.a)(n,2),a=c[0],j=c[1],d=Object(b.useState)(null),x=Object(i.a)(d,2),h=x[0],O=x[1];return Object(b.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t,n,c,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/japan_simplify.topojson");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,o.a(n,n.objects["N03-21_210101-N03-21_210101"]);case 8:c=e.sent,630,250,1890,138.915833,139.796111,35.672778,35.128889,r=u.b().center([139.355972,35.39083350000001]).translate([315,190]).scale(1890),a=u.c().projection(r),i=[],c.features.map((function(e){i.push({path:a(e),area_code:e.properties.N03_007})})),j(i);case 18:case"end":return e.stop()}}),e)})))()}),[]),Object(b.useEffect)((function(){O(t)}),[t]),a.length?Object(r.jsx)("svg",{viewBox:"-50 0 770 325",style:{border:"1px solid black"},width:"500",height:"550",children:Object(r.jsx)("g",{children:a.map((function(e,t){return Object(r.jsx)("path",{d:e.path,stroke:"black",strokeWidth:"0.4",strokeOpacity:"0.5",style:{fill:h>=e.area_code&&h<e.area_code+20?"red":"white"}},t)}))})}):Object(r.jsx)("p",{children:"loading"})},x=function(e){var t=e.scale,n=e.graphHeight,c=e.label,a="#888",s=t.range(),j=Object(i.a)(s,2),l=j[0],o=j[1],u=window.innerWidth;return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:0,y1:l,x2:0,y2:o+2,stroke:a,strokeWidth:"2"}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(-80, ".concat(n/2,") rotate(-90)"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:u>768?"15":"12",children:c})}),t.ticks().map((function(e,n){return Object(r.jsxs)("g",{transform:"translate(0, ".concat(t(e),")"),children:[Object(r.jsx)("line",{x1:"0",y1:"0",x2:"5",y2:"0",stroke:a}),Object(r.jsx)("text",{x:"-8",y:"0",textAnchor:"end",dominantBaseline:"central",fill:"black",fontSize:u>768?"12":"10",children:e})]},n)}))]})]})},h=function(e){var t=e.scale,n=e.graphWidth,c=e.graphHeight,a=e.label,s="#888",j=c,l=window.innerWidth,o=t.range(),u=Object(i.a)(o,2),b=u[0],d=u[1];return Object(r.jsxs)("g",{children:[Object(r.jsx)("line",{x1:b,y1:j,x2:d+5,y2:j,stroke:s}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(".concat(n/2,", ").concat(j+40,")"),children:Object(r.jsx)("text",{x:"0",y:"0",textAnchor:"end",dominantBaseline:"central",fontSize:"15",children:a})}),t.ticks(5).map((function(e,n){return Object(r.jsxs)("g",{transform:"translate(".concat(t(e),", 0)"),children:[Object(r.jsx)("line",{x1:"0",y1:c,x2:"0",y2:c-10,stroke:s}),Object(r.jsx)("text",{x:"0",y:j+15,textAnchor:"middle",dominantBaseline:"central",fontSize:l>768?"12":"10",children:e})]},n)}))]})]})},O=function(e){var t=e.effect,n=Object(b.useState)([]),c=Object(i.a)(n,2),a=c[0],j=c[1],o=Object(b.useState)([]),d=Object(i.a)(o,2),O=d[0],p=d[1],f=Object(b.useState)("price"),g=Object(i.a)(f,2),y=g[0],k=g[1],m=Object(b.useState)(null),v=Object(i.a)(m,2),w=v[0],S=v[1],_=Object(b.useState)([]),W=Object(i.a)(_,2),A=W[0],B=W[1],H=Object(b.useState)(null),z=Object(i.a)(H,2);z[0],z[1];if(Object(b.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t,n,c,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/population_test.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,j(n),e.next=9,fetch("./data/price_test.json");case 9:return c=e.sent,e.next=12,c.json();case 12:return r=e.sent,p(r),e.next=16,fetch("./data/2019_test.json");case 16:return a=e.sent,e.next=19,a.json();case 19:i=e.sent,B(i);case 21:case"end":return e.stop()}}),e)})))()}),[]),0===a.length)return Object(r.jsx)("div",{children:"Loading..."});var C=50,E=200,N=500,J=500,T=50+E+N,q=C+50+J,L=u.d().domain(u.a(O,(function(e){return e.year}))).range([0,N]).nice(),D=u.d().domain(u.a(A,(function(e){return e.rank}))).range([0,N]).nice(),F=function(e){t(e.currentTarget.dataset.id),console.log(e.currentTarget.dataset.id)},G=u.d().domain([0,u.a(a,(function(e){return e.population}))[1]]).range([J,0]),I=u.d().domain([0,u.a(O,(function(e){return e.price}))[1]]).range([J,0]),K=u.d().domain([0,u.a(A,(function(e){return e.price}))[1]]).range([J,0]);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("svg",{viewBox:"".concat(-E," ").concat(-C," ").concat(T," ").concat(q),width:T,height:q,style:{border:"1px solid black"},children:[null===w&&y&&Object(r.jsx)(h,{scale:L,graphWidth:N,graphHeight:J,label:"\u5e74"}),null===w&&y&&Object(r.jsx)(x,{scale:"price"===y?I:G,graphHeight:J,label:"price"===y?"\u53d7\u3051\u5165\u308c\u984d":"\u4eba\u53e3"}),null===w&&"price"===y&&Object(r.jsx)("g",{children:O.map((function(e,t){var n=t>0?O[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:L(n.year),y1:I(n.price),x2:L(e.year),y2:I(e.price),stroke:"black"},e.id)}))}),null===w&&"population"===y&&Object(r.jsx)("g",{children:a.map((function(e,t){var n=t>0?a[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:L(n.year),y1:G(n.population),x2:L(e.year),y2:G(e.population),stroke:"black"},e.id)}))}),2019===w&&A.length>0&&Object(r.jsx)(x,{scale:K,graphHeight:J,label:"\u53d7\u3051\u5165\u308c\u91d1\u984d"}),2019===w&&A.length>0&&Object(r.jsx)(h,{scale:D,graphWidth:N,graphHeight:J,label:"\u5e02\u533a\u753a\u6751\uff08\u9806\u4f4d\uff09"}),2019===w&&A.length>0&&Object(r.jsx)("g",{children:A.map((function(e,t){var n=t>0?A[t-1]:null;if(t>0)return Object(r.jsx)("line",{x1:D(n.rank),y1:K(n.price),x2:D(e.rank),y2:K(e.price),stroke:"black"},e.id)}))}),")"]}),Object(r.jsxs)("div",{children:[2019===w&&A.length>0&&Object(r.jsx)("ul",{children:A.map((function(e,t){return Object(r.jsx)("li",{"data-id":e.id,onClick:F,children:e.name},t)}))}),Object(r.jsx)("span",{children:"\u7279\u5fb4\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){S(null),k("population")},children:"\u4eba\u53e3"}),")"]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"\u5e74\u5ea6\u3092\u9078\u629e"}),Object(r.jsx)("button",{onClick:function(e){k(null),S(2019)},children:"2019"})]})]})},p=function(){var e=Object(b.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(d,{currentArea:n}),Object(r.jsx)(O,{effect:c})]})},f=function(){return Object(r.jsx)("div",{})},g=(n(130),function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(a,{}),Object(r.jsx)(p,{}),Object(r.jsx)(f,{})]})});Object(c.render)(Object(r.jsx)(g,{}),document.querySelector("#content"))}},[[131,1,2]]]);
//# sourceMappingURL=main.0d5349d0.chunk.js.map